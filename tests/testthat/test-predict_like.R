# WARNING - Generated by {fusen} from dev/flat_perform_prefmap.Rmd: do not edit by hand

test_that("predict_like works", {
  
  data("data_grid_toy")
  data("data_hedonic_toy")
  data("data_coord_real_toy")
  
  data_hedonic_large_toy <- data_hedonic_toy |>
    tidyr::pivot_wider(names_from = CONSUMER,
                       values_from = SCORE)
  
  # Unit test - panelist 1
  res_predict_like_panelist1 <- predict_like(
    data_coord_real = data_coord_real_toy,
    data_grid = data_grid_toy,
    data_hedonic_large = data_hedonic_large_toy,
    panelist_name = "1"
  )

  # long dput ----
  expect_equal(object = res_predict_like_panelist1[1:10, 1:10],
               expected = structure(
                 c(
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0
                 ),
                 dim = c(10L,
                         10L)
               ))
  # end of long dput ----
  
  # Unit test - panelist 27
  res_predict_like_panelist27 <- predict_like(
    data_coord_real = data_coord_real_toy,
    data_grid = data_grid_toy,
    data_hedonic_large = data_hedonic_large_toy,
    panelist_name = "27"
  )
  
  # long dput ----
  expect_equal(object = res_predict_like_panelist27[1:10, 1:10],
               expected = structure(
                 c(
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0,
                   0
                 ),
                 dim = c(10L,
                         10L)
               ))

  # end of long dput ----

})
