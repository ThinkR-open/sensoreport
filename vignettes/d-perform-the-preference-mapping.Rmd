---
title: "d - Perform the preference mapping"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{d-perform-the-preference-mapping}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(sensoreport)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_perform_prefmap.Rmd: do not edit by hand -->

# `perform_prefmap()`: Perform the preference mapping

With `perform_prefmap()`, you can perform the preference mapping.

This is based on the results of the PCA provided by the `perform_senso_mapping()` function (see vignette *c - Perform the multidimensional sensory analysis (mapping)* for more details). 

The graph of individuals (i.e. products) is discretized to form a grid of fictitious products. For each `x` * `y` coordinate of these fictitious products, the liking score is predicted for each panelist. A linear regression model `liking ~ coordinate dim 1 + coordinate dim 2 + coordinate dim 1 * coordinate dim 2` is used to predict the liking score for each panelist. 

Then, the fictitious product is stamped "liked" if its predicted score is greater than or equal to the average of the liking scores given by the panelist. Otherwise, it is stamped "unliked". The proportion of panelists who liked each fictitious product in the grid is then calculated. This value is projected onto the map using a response surface.

This graph is displayed in an interactive format.


```{r examples-perform_prefmap}
data("data_hedonic_toy")

res_mapping <- perform_senso_mapping(
  data_profiles = data_profiles_toy,
  data_products = data_products_toy
)

perform_prefmap(
  res_mapping,
  data_hedonic_toy
)
```

# `predict_like()`: Predict if a given panelist likes a given fictional product or not

    

  

```{r example-predict_like, eval = FALSE, echo = FALSE}
data("data_grid_toy")
data("data_hedonic_toy")
data("data_coord_real_toy")

data_hedonic_large_toy <- data_hedonic_toy |> 
  tidyr::pivot_wider(
    names_from = CONSUMER,
    values_from = SCORE
  )

predict_like(
  data_coord_real = data_coord_real_toy,
  data_grid = data_grid_toy,
  data_hedonic_large = data_hedonic_large_toy,
  panelist_name = "1"
)
```

  

  


